import{u as l,s as i,r as w,o as A,a as _,c as f,b as e,w as y,v as B,d as I,e as z,f as $,g as D,h as g,i as d,_ as k,j,k as F,t as p,l as h,m}from"./index-43dbed66.js";var T="https://js.stripe.com/v3",N=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,S="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",G=function(){for(var s=document.querySelectorAll('script[src^="'.concat(T,'"]')),r=0;r<s.length;r++){var t=s[r];if(N.test(t.src))return t}return null},W=function(s){var r=s&&!s.advancedFraudSignals?"?advancedFraudSignals=false":"",t=document.createElement("script");t.src="".concat(T).concat(r);var o=document.head||document.body;if(!o)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return o.appendChild(t),t},O=function(s,r){!s||!s._registerWrapper||s._registerWrapper({name:"stripe-js",version:"1.46.0",startTime:r})},v=null,q=function(s){return v!==null||(v=new Promise(function(r,t){if(typeof window>"u"){r(null);return}if(window.Stripe&&s&&console.warn(S),window.Stripe){r(window.Stripe);return}try{var o=G();o&&s?console.warn(S):o||(o=W(s)),o.addEventListener("load",function(){window.Stripe?r(window.Stripe):t(new Error("Stripe.js not available"))}),o.addEventListener("error",function(){t(new Error("Failed to load Stripe.js"))})}catch(n){t(n);return}})),v},K=function(s,r,t){if(s===null)return null;var o=s.apply(void 0,r);return O(o,t),o},E=Promise.resolve().then(function(){return q(null)}),P=!1;E.catch(function(a){P||console.warn(a)});var X=function(){for(var s=arguments.length,r=new Array(s),t=0;t<s;t++)r[t]=arguments[t];P=!0;var o=Date.now();return E.then(function(n){return K(n,r,o)})};const Y={class:"container mx-auto"},H={class:"flex justify-center"},J={class:"absolute inset-0 flex items-center justify-center bg-gray-700 bg-opacity-80"},Q={class:"relative w-full h-full max-w-md md:h-auto z-50"},Z={class:"relative bg-white rounded-lg shadow"},ee=e("svg",{"aria-hidden":"true",class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1),te=e("span",{class:"sr-only"},"Close modal",-1),se=[ee,te],oe={class:"px-6 py-6 lg:px-8"},re=e("h3",{class:"mb-4 text-xl font-medium text-gray-900 dark:text-black"}," Ajouter du crédit ",-1),ae=["onSubmit"],ne=e("label",{for:"amount"},"Montant",-1),ie=e("label",{for:"card-element"}," Credit or debit card ",-1),ce=e("div",{id:"card-element"},null,-1),le=e("div",null,[e("button",{class:"block w-full max-w-xs mx-auto bg-indigo-500 hover:bg-indigo-700 focus:bg-indigo-700 text-white rounded-lg px-3 py-3 font-semibold"},[e("i",{class:"mdi mdi-lock-outline mr-1"}),$(" PAY NOW ")])],-1),de={__name:"CreditFormModal",setup(a){const s=l(),{user:r}=i(s),t=w(!1);let o;const n=w(null);let c=null;A(async()=>{o=await X({}.VITE_APP_STRIPE_PUBLIC_KEY),c=o.elements().create("card"),c.mount("#card-element")});const L=()=>{console.log("openModal"),t.value=!0},b=()=>{console.log("closeModal"),t.value=!1},R=()=>{n.value=null,c.clear()};async function U(){console.log("handlePayment"),console.log("cardElement",c);try{const{token:u}=await o.createToken(c);(await D("transactions",{token:u.id,user:r.value["@id"],amount:n.value},{method:"POST"})).status===200&&(console.log("Payment succeeded"),b(),R())}catch(u){console.log(u)}}return(u,x)=>(_(),f("div",Y,[e("div",H,[e("button",{onClick:L,class:"px-6 py-2 text-white bg-blue-600 rounded shadow mb-4",type:"button"}," Ajouter du crédit "),y(e("div",J,[e("div",Q,[e("div",Z,[e("button",{onClick:b,type:"button",class:"absolute top-3 right-2.5 text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center dark:hover:bg-gray-800 dark:hover:text-white","data-modal-hide":"authentication-modal"},se),e("div",oe,[re,e("form",{class:"space-y-6",onSubmit:I(U,["prevent"])},[e("div",null,[ne,y(e("input",{type:"number",name:"amount","onUpdate:modelValue":x[0]||(x[0]=V=>n.value=V),class:"block w-full max-w-xs mx-auto bg-gray-100 border-transparent rounded-lg px-3 py-3 font-semibold text-gray-700 focus:border-gray-500 focus:bg-white focus:ring-0"},null,512),[[z,n.value]])]),ie,ce,le],40,ae)])])])],512),[[B,t.value]])])]))}},M=l(),ue=g(),pe=d(()=>{const{user:a}=i(M);return a.value});pe.value||ue.push("/login");d(()=>{const{orders:a}=i(M);console.log(a.value)});const he={},me=j('<div class="inline-block m-5"><div class="relative h-64"><img class="object-cover h-full w-64" src="https://fr.web.img6.acsta.net/pictures/22/05/10/16/46/2110017.jpg" alt="The Shawshank Redemption"></div><div class="text-center mt-2"><p class="text-black">Shark Bay</p><p class="text-gray-500">2022</p><p class="text-blue-400">15€</p></div></div><div class="inline-block m-5"><div class="relative h-64"><img class="object-cover h-full w-64" src="https://c8.alamy.com/compfr/cb6d8e/le-parrain-1972-poster-godf-001vs-moviestore-collection-ltd-cb6d8e.jpg" alt="The Godfather"></div><div class="text-center mt-2"><p class="text-black">The Godfather</p><p class="text-gray-500">1972</p><p class="text-blue-400">15€</p></div></div><div class="inline-block m-5"><div class="relative h-64"><img class="object-cover h-full w-64" src="https://fr.web.img2.acsta.net/medias/nmedia/18/63/97/89/18949761.jpg" alt="The Dark Knight"></div><div class="text-center mt-2"><p class="text-black">The Dark Knight</p><p class="text-gray-500">2008</p><p class="text-blue-400">20€</p></div></div>',3);function ve(a,s,r,t,o,n){return me}const _e=k(he,[["render",ve]]),fe={class:"flex"},ge=e("div",{class:"w-1/3"},[e("img",{src:"https://randomuser.me/api/portraits/men/1.jpg",alt:"Profile Picture",class:"w-32 h-32 rounded-lg mx-auto mb-6"})],-1),xe={class:"w-2/3 p-4"},be={class:"text-lg font-medium text-gray-700 mb-2"},we={class:"text-gray-700 font-medium mb-2"},ye={class:"text-lg font-medium text-gray-700 mb-2"},Se={class:"text-red-400 font-medium"},$e={__name:"ProfileInfos",setup(a){F();const s=l(),r=g(),t=d(()=>{const{user:o}=i(s);return o.value});return t.value||r.push("/login"),(o,n)=>(_(),f("div",fe,[ge,e("div",xe,[e("h3",be,p(h(t).lastname)+" "+p(h(t).firstname),1),e("p",we,p(h(t).email),1),e("h3",ye,[$(" Votre crédit : "),e("p",Se,p(h(t).credit)+"€ ",1)])])]))}},ke=l(),je=g(),C=d(()=>{const{user:a}=i(ke);return a.value});C.value||je.push("/login");console.log("test",C.value);const Te={},Ee={class:"inline-block m-5"},Pe=j('<div class="relative h-64"><img class="object-cover h-full w-64" src="https://img.freepik.com/vecteurs-premium/ticket-cinema_1459-2366.jpg?w=2000" alt=""></div><div class="text-center mt-2"><p class="text-black">La délicatesse</p><p class="text-gray-500">Durée : 1 heure 15 minutes</p><p class="text-blue-400">15€</p></div>',2),Me=[Pe];function Ce(a,s,r,t,o,n){return _(),f("div",Ee,Me)}const Le=k(Te,[["render",Ce]]),Re={class:"container mx-auto"},Ue={class:"bg-gray-100 p-6 rounded-lg"},Ve={class:"relative overflow-hidden"},Ae=e("div",{class:"relative z-10 flex items-center justify-center h-48 bg-gray-800"},[e("h1",{class:"text-white text-lg font-medium"},"Récement vu")],-1),Be={class:"relative z-0"},Ie={class:"overflow-x-auto"},ze={class:"bg-gray-100 p-6 rounded-lg"},De={class:"relative overflow-hidden"},Fe=e("div",{class:"relative z-10 flex items-center justify-center h-48 bg-gray-800"},[e("h1",{class:"text-white text-lg font-medium"},"Mes billets")],-1),Ne={class:"relative z-0"},Ge={class:"overflow-x-auto"},Oe={__name:"Profile",setup(a){const s=l(),r=g(),t=d(()=>{const{user:o}=i(s);return o.value});return t.value||r.push("/login"),console.log("test",t.value),(o,n)=>(_(),f("div",Re,[m($e),m(de),e("section",Ue,[e("div",Ve,[Ae,e("div",Be,[e("div",Ie,[m(_e)])])])]),e("section",ze,[e("div",De,[Fe,e("div",Ne,[e("div",Ge,[m(Le)])])])])]))}};export{Oe as default};
