import{_ as L,r as u,k as B,h as A,E as F,C as G,a as i,c as d,b as s,w as _,G as I,F as g,H as P,t as f,e as M,I as R,m as O,D as S,A as $,f as H,g as J,J as K,K as j}from"./index-8538187a.js";const v=c=>(K("data-v-3c139b8a"),c=c(),j(),c),q=v(()=>s("h1",{class:"text-xl"},"Users",-1)),z={class:"flex flex-col gap-3"},Q={class:"flex flex-row gap-3"},W={class:"flex flex-row gap-1"},X=v(()=>s("label",{for:"search-field"},"Champ",-1)),Y=["value"],Z={class:"flex flex-row gap-1"},ee=v(()=>s("label",{for:"search-value"},"Valeur",-1)),te=v(()=>s("option",{value:""},"Tous",-1)),ae=["value"],se={__name:"Users",setup(c){const x=u([]),m=u(!0),N=B(),C=A(),p=u("email"),o=u(""),y=u(0),h=u({page:1,rowsPerPage:10,sortBy:"email",sortType:"asc"}),b={ROLE_ADMIN:"Administrateur",ROLE_USER:"Utilisateur"},w=["lastName","firstName","email"],k=["roles"],E=[...w,...k],U=[{text:"ID",value:"id"},{text:"Prénom",value:"firstName",sortable:!0},{text:"Nom",value:"lastName",sortable:!0},{text:"Email",value:"email",sortable:!0},{text:"Rôle",value:"roles"},{text:"Group de théâtre",value:"theaterGroup"}];function V(){const a=new URLSearchParams,{page:t,rowsPerPage:l,sortBy:n,sortType:e}=h.value;return a.append("page",t),a.append("itemsPerPage",l),a.append(`order[${n}]`,e),o.value&&a.append(p.value,o.value),a}F(async()=>{try{m.value=!0;const a=V(),{data:t}=await J("/users?"+a.toString());x.value=t["hydra:member"].map(l=>{var e;const n=(e=l.theaterGroups)==null?void 0:e.find(r=>r.status==="verified");return{...l,id:l["@id"].split("/").pop(),roles:l.roles.map(r=>b[r]),...n&&{theaterGroup:{id:n["@id"].split("/").pop(),name:n.name}}}}),y.value=t["hydra:totalItems"]}catch(a){N.error(a.message)}finally{m.value=!1}});function T(a){C.push({name:"admin-user",params:{userId:a.id}})}return(a,t)=>{const l=G("router-link"),n=G("EasyDataTable");return i(),d(g,null,[q,s("div",z,[s("div",Q,[s("div",W,[X,_(s("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>p.value=e),id:"search-field",onChange:t[1]||(t[1]=e=>o.value="")},[(i(),d(g,null,P(E,e=>{var r;return s("option",{key:e,value:e},f((r=U.find(D=>D.value===e))==null?void 0:r.text),9,Y)}),64))],544),[[I,p.value]])]),s("div",Z,[ee,w.includes(p.value)?_((i(),d("input",{key:0,"onUpdate:modelValue":t[2]||(t[2]=e=>o.value=e),type:"text",id:"search-value",class:"border border-gray-300"},null,512)),[[M,o.value]]):k.includes(p.value)?_((i(),d("select",{key:1,"onUpdate:modelValue":t[3]||(t[3]=e=>o.value=e),id:"search-value",class:"border border-gray-300"},[te,(i(),d(g,null,P(b,(e,r)=>s("option",{key:r,value:r},f(e),9,ae)),64))],512)),[[I,o.value]]):R("",!0),s("button",{onClick:t[4]||(t[4]=e=>o.value="")},"Réinitialiser")])]),O(n,{"server-options":h.value,"onUpdate:server-options":t[5]||(t[5]=e=>h.value=e),"server-items-length":y.value,"buttons-pagination":"",headers:U,items:x.value,loading:m.value,alternating:"","rows-items":[10,25,50],"rows-of-page-separator-message":"sur","rows-per-page-message":"Résultats par page","empty-message":"Aucun résultat","must-sort":"",onClickRow:T},{"item-theaterGroup":S(e=>[e.theaterGroup?(i(),$(l,{key:0,to:{name:"admin-theater-group",params:{theaterGroupId:e.theaterGroup.id}}},{default:S(()=>[H(f(e.theaterGroup.name),1)]),_:2},1032,["to"])):R("",!0)]),_:1},8,["server-options","server-items-length","items","loading"])])],64)}}},oe=L(se,[["__scopeId","data-v-3c139b8a"]]);export{oe as default};
